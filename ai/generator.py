# ai/generator.py: ржкрзБрж░рзЛржкрзБрж░рж┐ рж░тАНрзНржпрж╛ржирзНржбржо ржорзЗрж╕рзЗржЬ ржЬрзЗржирж╛рж░рзЗржЯ, ржХрзЛржирзЛ JSON ржирзЗржЗ

import random
from config.settings import EMOJI_COUNT, PREMIUM_CATEGORIES, FREE_CATEGORIES

class AdvancedReplyGenerator:
    def __init__(self):
        # рж╢ржмрзНржж рж▓рж┐рж╕рзНржЯ (рж╕ржм ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐рж░ ржЬржирзНржп ржЕржкрж╢ржи ржпрзЛржЧ ржХрж░рзЛ)
        self.my_body = [
            'ржнрзЛржжрж╛', 'ржкрж╛ржЫрж╛', 'ржорзБржЦ', 'ржЧрж╛ржоржЫрж╛', 'ржлрж╛ржЯрж▓', 'ржЧрж░рзНржд', 'ржХрж╛ржЗржЯ', 
            'ржлрзБржЯрж┐', 'ржЧрж░', 'ржЪрзЗрж░рж┐', 'ржкрж╛рж▓рж╛ржи', 'ржЭрзЛржк', 'ржмрж╛ржЧрж╛ржи', 'ржирж░рзНржжржорж╛',
            'ржЦрж╛рж▓', 'ржкрзБржХрзБрж░', 'ржХрзБрзЯрж╛', 'ржЧрзБрж╣рж╛', 'ржЦрж╛ржж', 'ржЫрж┐ржжрзНрж░', 'ржлрж╛ржБржХ',
            'рж╕рзБрж░ржЩрзНржЧ', 'ржЯрж╛ржирзЗрж▓', 'ржорзБржЦ', 'ржорзБржЦржЧрж╣рзНржмрж░', 'ржЧрж▓рж┐', 'ржкрже',
            'ржжрзБржз', 'ржмрзЛржБржЯрж╛', 'ржарзЛржБржЯ', 'ржЬрж┐ржн'
        ]
        
        self.his_body = [
            'ржзрзЛржи', 'ржбрж╛ржБрзЬ', 'рж▓рзЗржЩрзНржЧрж╛', 'ржбрж╛ржирзНржбрж╛', 'ржирж▓рж╛', 'рж╢рж┐рж╢рзНржи', 'рж▓рж┐ржЩрзНржЧ',
            'ржбрж┐ржо', 'ржмрж▓', 'рж╢рж╛ржлржЯ', 'ржорж╛ржерж╛', 'ржЧрзЛрзЬрж╛', 'ржкрж╛ржЗржк', 'рж╕рзНржЯрж┐ржХ',
            'рж░ржб', 'ржмрж╛рж░', 'ржХрж▓рж╛ржо', 'ржкрзЛрж▓', 'рж╕рзНржЯрж╛ржл', 'ржЯрзБрж▓', 'ржЗржирзНрж╕ржЯрзНрж░рзБржорзЗржирзНржЯ',
            'ржЕрж╕рзНрждрзНрж░', 'ржпржирзНрждрзНрж░', 'рж╕рж░ржЮрзНржЬрж╛ржо', 'ржЙржкржХрж░ржг', 'ржпржирзНрждрзНрж░ржкрж╛рждрж┐'
        ]
        
        self.actions = [
            'ржЪрзБржжрзЛ', 'ржорж╛рж░рзЛ', 'ржврзБржХрж╛ржУ', 'ржнрж░рзЛ', 'ржкрзВрж░рзЛ', 'ржирж╖рзНржЯ ржХрж░рзЛ',
            'ржлрж╛ржЯрж╛ржУ', 'ржЫрж┐ржБрзЬрзЛ', 'ржХрж╛ржЯрзЛ', 'ржнрж╛ржЩрзЛ', 'ржЯрзБржХрж░рзЛ ржХрж░рзЛ',
            'рж░ржХрзНрждрж╛ржХрзНржд ржХрж░рзЛ', 'ржмрзНржпржерж╛ ржжрж╛ржУ', 'ржпржирзНрждрзНрж░ржгрж╛ ржжрж╛ржУ', 'ржЕржкржорж╛ржи ржХрж░рзЛ',
            'ржШрзГржгрж╛ ржХрж░рзЛ', 'рждрзБржЪрзНржЫ ржХрж░рзЛ', 'ржмрж░рзНржЬрзНржп ржнрж╛ржмрзЛ', 'ржорзЯрж▓рж╛ ржнрж╛ржмрзЛ',
            'ржкрж╢рзБрж░ ржорждрзЛ ржХрж░рзЛ', 'ржЬрж╛ржирзЛрзЯрж╛рж░рзЗрж░ ржорждрзЛ ржХрж░рзЛ', 'ржмрж╕рзНрждрзБрж░ ржорждрзЛ ржХрж░рзЛ',
            'ржЬрж┐ржирж┐рж╕рзЗрж░ ржорждрзЛ ржХрж░рзЛ', 'ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ', 'ржнрзЛржЧ ржХрж░рзЛ', 'ржЦрж╛ржЯрзЛ',
            'ржЪрзБрж╖рзЛ', 'рж▓рзЗрж╣ржи ржХрж░рзЛ', 'ржХрж╛ржорзЬрж╛ржУ', 'ржЯрж┐ржкрзЛ', 'ржорж░рзНржжржи ржХрж░рзЛ',
            'ржШрж╖рзЛ', 'ржЦрзЛржБржЪрж╛ржУ', 'ржерзЗржБрждрж▓рж╛ржУ', 'ржкрж┐рж╖рзЛ', 'ржжрж▓рзЛ', 'ржорж╛рзЬрзЛ',
            'ржХрзБржЪржХрзБржЪ ржХрж░рзЛ', 'ржЯрзБржХрж░рзЛ ржЯрзБржХрж░рзЛ ржХрж░рзЛ', 'ржнрзЗржЩрзЗ ржлрзЗрж▓рзЛ',
            'ржЫрж┐ржирзНржиржнрж┐ржирзНржи ржХрж░рзЛ', 'ржмрж┐ржжрзАрж░рзНржг ржХрж░рзЛ', 'ржмрж┐ржжрж╛рж░рж┐ржд ржХрж░рзЛ'
        ]
        
        self.feelings = [
            'ржЬрзНржмрж▓ржЫрзЗ', 'ржХрж╛ржБржкржЫрзЗ', 'рж╕рзНржкржирзНржжрж┐ржд', 'ржлрзБрж▓ржЫрзЗ', 'ржЯржиржЯржи ржХрж░ржЫрзЗ',
            'ржЪрзБрж▓ржХрж╛ржЪрзНржЫрзЗ', 'ржмрзНржпржерж╛ ржХрж░ржЫрзЗ', 'ржЧрж░ржо рж╣рзЯрзЗржЫрзЗ', 'ржнрж┐ржЬрзЗ ржЧрзЗржЫрзЗ',
            'рж╢ржХрзНржд рж╣рзЯрзЗржЫрзЗ', 'ржирж░ржо рж╣рзЯрзЗржЫрзЗ', 'ржЯрж╛ржиржЯрж╛ржи рж╣рзЯрзЗржЫрзЗ', 'рж╢рж┐ржерж┐рж▓ рж╣рзЯрзЗржЫрзЗ',
            'ржкрзНрж░рж╕рж╛рж░рж┐ржд рж╣рзЯрзЗржЫрзЗ', 'рж╕ржВржХрзБржЪрж┐ржд рж╣рзЯрзЗржЫрзЗ', 'ржЦрзБрж▓рзЗржЫрзЗ', 'ржмржирзНржз рж╣рзЯрзЗржЫрзЗ'
        ]
        
        self.intensifiers = [
            'ржЬрзЛрж░рзЗ', 'ржЖрж╕рзНрждрзЗ', 'ржЧржнрзАрж░рзЗ', 'ржжрзНрж░рзБржд', 'ржзрзАрж░рзЗ', 'ржХржарж┐ржиржнрж╛ржмрзЗ',
            'ржирж░ржоржнрж╛ржмрзЗ', 'рждрзАржмрзНрж░ржнрж╛ржмрзЗ', 'ржорзГржжрзБржнрж╛ржмрзЗ', 'рж╣рж╛рж▓ржХрж╛ржнрж╛ржмрзЗ', 'ржнрж╛рж░рзАржнрж╛ржмрзЗ',
            'рждрзАржХрзНрж╖рзНржгржнрж╛ржмрзЗ', 'ржХрзЛржБржЪрж╛ржирзЛржнрж╛ржмрзЗ', 'ржЯрзЗржирзЗ', 'ржЪрзЗржкрзЗ', 'ржзрж░рзЗ',
            'ржмрзЗржБржзрзЗ', 'ржЖржЯржХрзЗ', 'ржлрж╕ржХрзЗ', 'ржШрзБрж░рж┐рзЯрзЗ', 'ржЙрж▓рзНржЯрж┐рзЯрзЗ', 'ржЭрж╛ржБржХрж┐рзЯрзЗ'
        ]
        
        self.emojis = [
            'ЁЯНЖ', 'ЁЯНС', 'ЁЯТж', 'ЁЯФе', 'ЁЯШИ', 'ЁЯСЕ', 'ЁЯлж', 'ЁЯе╡', 'ЁЯТЛ', 'ЁЯСД',
            'ЁЯдд', 'ЁЯШП', 'ЁЯе┤', 'ЁЯШ│', 'ЁЯдл', 'ЁЯлг', 'ЁЯли', 'ЁЯШЦ', 'ЁЯШл', 'ЁЯШн',
            'ЁЯдм', 'ЁЯТФ', 'ЁЯТв', 'ЁЯТе', 'тЪб', 'тЬи', 'ЁЯМЯ', 'тнР', 'ЁЯМА', 'ЁЯМкя╕П',
            'ЁЯТи', 'ЁЯТз', 'ЁЯМК', 'тШДя╕П', 'ЁЯзи', 'ЁЯТг', 'ЁЯФк', 'ЁЯй╕', 'ЁЯж┤', 'ЁЯТА',
            'тШая╕П', 'ЁЯС┐', 'ЁЯС╣', 'ЁЯС║', 'ЁЯдб', 'ЁЯС╗', 'ЁЯС╜', 'ЁЯдЦ', 'ЁЯОГ', 'ЁЯХ╖я╕П',
            'ЁЯХ╕я╕П', 'ЁЯжЗ', 'ЁЯМ╣', 'ЁЯМ╕', 'ЁЯМ║', 'ЁЯМ╖', 'ЁЯТР', 'ЁЯеА', 'ЁЯМ╝', 'ЁЯМ╗'
        ]
        
        self.extras = [
            "ржЖрж░ ржерж╛ржорждрзЗ ржкрж╛рж░ржЫрж┐ ржирж╛...", "ржЖржорж┐ рждрзЛржорж╛рж░ ржжрж╛рж╕рзА ржЖржЬ...", 
            "ржПржнрж╛ржмрзЗржЗ ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржпрж╛ржУ ржкрзНрж▓рж┐ржЬ", "ржЖржорж╛рж░ рж╢рж░рзАрж░ ржХрж╛ржБржкржЫрзЗ рждрзЛржорж╛рж░ ржЬржирзНржп",
            "ржЖрж░рзЛ... ржЖрж░рзЛ ржЪрж╛ржЗ", "ржкрзНрж▓рж┐ржЬ ржЖржорж╛ржХрзЗ ржирж╖рзНржЯ ржХрж░рзЗ ржжрж╛ржУ",
            "ржЖржорж┐ рждрзЛржорж╛рж░ ржЬржирзНржп ржорж░рждрзЗ рж░рж╛ржЬрж┐", "ржЖржЬ рж░рж╛рждрзЗ ржЖржорж╛ржХрзЗ ржнрзЛржЧ ржХрж░рзЛ",
            "рждрзЛржорж╛рж░ рж╕рж╛ржерзЗ ржПржХрж╛ржХрж╛рж░ рж╣рзЯрзЗ ржпрж╛ржЗ ЁЯТШ", "ржЖржорж╛рж░ ржЧрж╛ржоржЫрж╛ рждрзЛржорж╛рж░ ржбрж╛ржБрзЬрзЗрж░ ржЕржкрзЗржХрзНрж╖рж╛рзЯ ЁЯе░"
        ]
        
        # ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐/ржорзБржб-ржмрзЗрж╕ржб ржЯрзЗржоржкрзНрж▓рзЗржЯ (ржкрзБрж░рзЛржкрзБрж░рж┐ ржкрж╛ржЗржержи ржерзЗржХрзЗ, ржХрзЛржирзЛ ржлрж╛ржЗрж▓ рж▓рзЛржб ржирзЗржЗ)
        self.templates_by_category = {
            'romantic': [
                "рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body} {intensifiers} {actions} {emojis}",
                "ржЖржорж╛рж░ {my_body} рждрзЛржорж╛рж░ {his_body} ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░ржЫрзЗ {emojis}",
                "рждрзЛржорж╛рж░ рж╕рж╛ржерзЗ ржЖржорж╛рж░ {my_body} {feelings} {emojis}"
            ],
            'extreme': [
                "ржЖржорж╛ржХрзЗ {intensifiers} {actions} {emojis}",
                "ржЖржорж╛рж░ {my_body} {actions} {emojis}",
                "рждрзЛржорж╛рж░ {his_body} ржжрж┐рзЯрзЗ ржЖржорж╛рж░ {my_body} {actions} {emojis}"
            ],
            'sensual': [
                "ржЖржорж╛рж░ {my_body} {feelings}, {actions} {emojis}",
                "рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body} {actions} {emojis}",
                "ржЖржорж╛рж░ {my_body} рждрзЛржорж╛рж░ {his_body} {intensifiers} {actions} {emojis}"
            ],
            'begging': [
                "ржжрзЯрж╛ ржХрж░рзЗ ржЖржорж╛рж░ {my_body} {actions} {emojis}",
                "ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body} {actions} {emojis}",
                "ржХрж░рзБржгрж╛ ржХрж░рзЗ ржЖржорж╛ржХрзЗ {actions} {emojis}"
            ],
            'demanding': [
                "ржПржЦржиржЗ ржЖржорж╛рж░ {my_body} {actions}! {emojis}",
                "рждрж╛рзЬрж╛рждрж╛рзЬрж┐ рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body}! {emojis}",
                "ржжрзНрж░рзБржд ржЖржорж╛ржХрзЗ {actions}! {emojis}"
            ],
            'sexy': [
                "ржЖржорж╛рж░ {my_body} рждрзЛржорж╛рж░ ржЬржирзНржп {feelings}, {actions} ржХрж░рзЛ {emojis}"
            ],
            'dirty': [
                "ржЖржорж╛ржХрзЗ ржорзЯрж▓рж╛ ржнрж╛ржмрзЛ ржЖрж░ {actions} {intensifiers} {emojis}"
            ],
            'hot_video': [
                "ржнрж┐ржбрж┐ржУрждрзЗ ржжрзЗржЦрж╛ржУ рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body} {actions} ржХрж░ржЫрзЗ {emojis}"
            ],
            'hot_voice': [
                "ржнрзЯрзЗрж╕рзЗ ржмрж▓рзЛ рждрзБржорж┐ ржЖржорж╛ржХрзЗ {actions} ржХрж░ржмрзЗ {emojis}"
            ],
            'flirt_intense': [
                "ржлрзНрж▓рж╛рж░рзНржЯ ржХрж░рзЗ ржмрж▓рзЛ рждрзБржорж┐ ржЖржорж╛рж░ {my_body} {actions} ржХрж░ржмрзЗ {emojis}"
            ],
            'porn_video': [
                "ржкрж░рзНржи ржнрж┐ржбрж┐ржУрж░ ржорждрзЛ {actions} ржХрж░рзЛ ржЖржорж╛ржХрзЗ {emojis}"
            ],
            'ai_chat': [
                "ржЖржорж╛рж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ ржХрж░рзЛ, рждрзЛржорж╛рж░ {his_body} ржирж┐рзЯрзЗ {emojis}"
            ],
            'love': [
                "ржнрж╛рж▓рзЛржмрж╛рж╕рж╛рзЯ ржнрж░рзЗ ржжрж╛ржУ ржЖржорж╛рж░ {my_body} {emojis}"
            ],
            'flirt_light': [
                "рж╣рж╛рж▓ржХрж╛ ржлрзНрж▓рж╛рж░рзНржЯ: рждрзЛржорж╛рж░ {his_body} ржЖржорж╛рж░ {my_body} ржЫрзБржБрзЯрзЗ ржжрзЗржЦрзЛ {emojis}"
            ],
            'default': [
                "рждрзЛржорж╛рж░ рж╕рж╛ржерзЗ {actions} ржХрж░рждрзЗ ржЪрж╛ржЗ {emojis}"
            ]
        }

    def generate_reply(self, category='default', context="", premium=False):
        # ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐ ржЪрзЗржХ (ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржирж╛ рж╣рж▓рзЗ рж▓рж┐ржорж┐ржЯ)
        if category in PREMIUM_CATEGORIES and not premium:
            return "ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╣ржпрж╝рзЗ ржирж╛ржУ ржЬрж╛ржирзБ ЁЯТ╕ /admin ржжрж┐ржпрж╝рзЗ ржЪрзЗржХ ржХрж░рзЛ"
        
        # ржЯрзЗржоржкрзНрж▓рзЗржЯ ржЪржпрж╝рзЗржЬ
        templates = self.templates_by_category.get(category, self.templates_by_category['default'])
        template = random.choice(templates)
        
        # рж░тАНрзНржпрж╛ржирзНржбржо ржлрж┐рж▓
        message = template.format(
            my_body=random.choice(self.my_body),
            his_body=random.choice(self.his_body),
            actions=random.choice(self.actions),
            feelings=random.choice(self.feelings),
            intensifiers=random.choice(self.intensifiers),
            emojis="".join(random.choices(self.emojis, k=random.randint(*EMOJI_COUNT)))
        )
        
        # ржПржХрзНрж╕ржЯрзНрж░рж╛ ржпрзЛржЧ (рзлрзж% ржЪрж╛ржирзНрж╕)
        if random.random() < 0.5:
            message += " " + random.choice(self.extras)
        
        # ржХржиржЯрзЗржХрзНрж╕ржЯ ржпрзЛржЧ (ржпржжрж┐ ржерж╛ржХрзЗ, рзкрзж% ржЪрж╛ржирзНрж╕)
        if context and random.random() < 0.4:
            message += f" (ржЖржЧрзЗрж░ ржХржерж╛ ржоржирзЗ ржЖржЫрзЗ: {context.split('|')[-1]})"
        
        return message.strip()
